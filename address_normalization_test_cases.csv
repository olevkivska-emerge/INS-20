test_case_id,test_category,test_scenario,description,acceptance_criteria,api_endpoint,http_method,request_payload,expected_status_code,expected_response_fields,expected_behavior,prerequisites,test_data_origin_address1,test_data_origin_city,test_data_origin_state,test_data_origin_postal_code,test_data_origin_country_code,test_data_origin_location_name,test_data_origin_location_code,test_data_dest_address1,test_data_dest_city,test_data_dest_state,test_data_dest_postal_code,test_data_dest_country_code,test_data_dest_location_name,test_data_dest_location_code,notes
TC-AC-001,Preserve User Input,Original input preservation,Verify user-provided location data is stored exactly as submitted in Stop table,AC1: All user-provided location data stored exactly as submitted,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""name"":""My Custom Name"",""location_code"":""CUST-001"",""address1"":""123 Main St"",""city"":""New York"",""state"":""NY"",""postal_code"":""10001"",""country_code"":""US""}}}]}",200,"location.name, location.location_code, address1, city, state, postal_code","User's original input preserved in Stop table exactly as submitted",None,123 Main St,New York,NY,10001,US,My Custom Name,CUST-001,,,,,,,"Verify location_code, location name, and address formatting are never modified"
TC-AC-002,Preserve User Input,GET response returns original input,Verify GET /loads returns user's original input,AC1: GET /loads responses always return user's original input,GET /api/v1/loads/{load_id},GET,None,200,"name, location_code, address1-city, address1-country_code","Response includes user's original location_code, name, and address formatting",Load created with TC-AC-001,,,,,,,,,,,"GET response should match exactly what was submitted in POST"
TC-AC-003,Google Places API,Successful API call,Verify Google Places API is called for each stop address,AC2: System calls Google Places API for each stop's address,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""1600 Amphitheatre Parkway"",""city"":""Mountain View"",""state"":""CA"",""postal_code"":""94043"",""country_code"":""US""}}}]}",200,"normalized_location_id, latitude, longitude","Google Places API called and place_id, standardized address, coordinates extracted",Google Places API accessible,1600 Amphitheatre Parkway,Mountain View,CA,94043,US,Google Headquarters,GOOGLE-001,,,,,,,"Verify API call happens asynchronously during load creation"
TC-AC-004,Google Places API,API call extracts data,Verify system extracts place_id, standardized address, and coordinates,AC2: System extracts place_id, standardized address components, and coordinates,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""1 Apple Park Way"",""city"":""Cupertino"",""state"":""CA"",""postal_code"":""95014"",""country_code"":""US""}}}]}",200,"google_place_id, standardized_address, latitude, longitude","place_id, standardized address components, and coordinates stored in NormalizedLocation",Google Places API accessible,1 Apple Park Way,Cupertino,CA,95014,US,Apple Park,APPLE-001,,,,,,,"Verify all three data points are extracted"
TC-AC-005,Google Places API,Asynchronous processing,Verify API calls happen asynchronously,AC2: API calls happen asynchronously during load creation,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""350 5th Ave"",""city"":""New York"",""state"":""NY"",""postal_code"":""10118"",""country_code"":""US""}}}]}",200,"load_id, normalized_location_id","Load creation completes successfully even if Google Places API is slow",Google Places API accessible,350 5th Ave,New York,NY,10118,US,Empire State Building,ESB-001,,,,,,,"Load should be created immediately, normalization happens in background"
TC-AC-006,Google Places API,Load creation never fails,Verify load creation doesn't fail due to Google Places API errors,AC2: Load creation never fails due to Google Places API errors,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""123 Invalid Address"",""city"":""Nowhere"",""state"":""XX"",""postal_code"":""00000"",""country_code"":""US""}}}]}",200,"load_id","Load created successfully even when Google Places API returns error",Google Places API returns error for invalid address,123 Invalid Address,Nowhere,XX,00000,US,Invalid Location,INV-001,,,,,,,"Verify graceful failure handling"
TC-AC-007,Create NormalizedLocation,New location creation,Verify new NormalizedLocation is created when no match found,AC3: System creates new NormalizedLocation when no match found,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""500 Broadway"",""city"":""San Francisco"",""state"":""CA"",""postal_code"":""94111"",""country_code"":""US"",""name"":""First Warehouse""}}}]}",200,"normalized_location_id, google_place_id, standardized_address, latitude, longitude, name","New NormalizedLocation record created with google_place_id, standardized address, coordinates, and name from first user_name",No existing NormalizedLocation with matching criteria,500 Broadway,San Francisco,CA,94111,US,First Warehouse,FW-001,,,,,,,"Verify initial location name is set from first location user_name"
TC-AC-008,Create NormalizedLocation,Location name from first stop,Verify initial location name defaults to user_name from first stop,AC3: Initial location name is set from first location user_name,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""100 Market St"",""city"":""San Francisco"",""state"":""CA"",""postal_code"":""94105"",""country_code"":""US"",""name"":""Primary Distribution Center""}}}]}",200,"normalized_location.name","NormalizedLocation.name equals 'Primary Distribution Center' from first stop",No existing NormalizedLocation,100 Market St,San Francisco,CA,94105,US,Primary Distribution Center,PDC-001,,,,,,,"First time location is created, name defaults to user_name"
TC-AC-009,Deduplication Tier 1,Match by Google Place ID,Verify Tier 1 deduplication matches by Google Place ID,AC4: Tier 1 matches by Google Place ID,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""1600 Amphitheatre Parkway"",""city"":""Mountain View"",""state"":""CA"",""postal_code"":""94043"",""country_code"":""US"",""name"":""Google HQ""}}}]}",200,"normalized_location_id","Existing NormalizedLocation reused when Google Place ID matches",NormalizedLocation exists with same google_place_id,1600 Amphitheatre Parkway,Mountain View,CA,94043,US,Google HQ,GOOGLE-002,,,,,,,"Highest priority deduplication method"
TC-AC-010,Deduplication Tier 1,Reuse existing location,Verify existing NormalizedLocation is reused when Place ID matches,AC4: When match found, reuse existing NormalizedLocation,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""1 Apple Park Way"",""city"":""Cupertino"",""state"":""CA"",""postal_code"":""95014"",""country_code"":""US"",""name"":""Apple Campus""}}}]}",200,"normalized_location_id","Same normalized_location_id returned as existing location",NormalizedLocation exists with google_place_id ChIJ... (Apple Park),1 Apple Park Way,Cupertino,CA,95014,US,Apple Campus,APPLE-002,,,,,,,"Verify unit tracking is updated"
TC-AC-011,Deduplication Tier 2,Match by normalized address,Verify Tier 2 deduplication matches by exact normalized address,AC4: Tier 2 matches by exact normalized address,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""500 Broadway"",""city"":""San Francisco"",""state"":""CA"",""postal_code"":""94111"",""country_code"":""US"",""name"":""Warehouse 2""}}}]}",200,"normalized_location_id","Existing NormalizedLocation reused when normalized address matches exactly (street_address + city + state + postal_code + country_code)",NormalizedLocation exists with matching normalized address but different/unknown place_id,500 Broadway,San Francisco,CA,94111,US,Warehouse 2,FW-002,,,,,,,"Used when Place ID doesn't match or is unavailable"
TC-AC-012,Deduplication Tier 2,Exact address match,Verify exact match of all address components,AC4: Match by exact normalized address (street_address + city + state + postal_code + country_code),POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""100 Market St"",""city"":""San Francisco"",""state"":""CA"",""postal_code"":""94105"",""country_code"":""US"",""name"":""Different Name""}}}]}",200,"normalized_location_id","Same NormalizedLocation reused when all address components match exactly",NormalizedLocation exists with same normalized address components,100 Market St,San Francisco,CA,94105,US,Different Name,PDC-002,,,,,,,"All 5 components must match: street_address, city, state, postal_code, country_code"
TC-AC-013,Deduplication Tier 3,Match by coordinate proximity,Verify Tier 3 deduplication matches by coordinate proximity,AC4: Tier 3 matches by coordinate proximity (<0.0001 degrees / ~11 meters),POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""350 5th Ave"",""city"":""New York"",""state"":""NY"",""postal_code"":""10118"",""country_code"":""US"",""name"":""Empire State""}}}]}",200,"normalized_location_id","Existing NormalizedLocation reused when coordinates are within 0.0001 degrees (~11 meters)",NormalizedLocation exists with coordinates within 0.0001 degrees but different address,350 5th Ave,New York,NY,10118,US,Empire State,ESB-002,,,,,,,"Used when Place ID and normalized address don't match"
TC-AC-014,Deduplication Tier 3,Proximity threshold,Verify proximity threshold of 0.0001 degrees is enforced,AC4: Match by coordinate proximity (<0.0001 degrees / ~11 meters),POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""1 World Trade Center"",""city"":""New York"",""state"":""NY"",""postal_code"":""10007"",""country_code"":""US""}}}]}",200,"normalized_location_id","New NormalizedLocation created when coordinates differ by >= 0.0001 degrees",NormalizedLocation exists with coordinates 0.0002 degrees away,1 World Trade Center,New York,NY,10007,US,WTC-001,WTC-001,,,,,,,"Verify threshold is strictly enforced"
TC-AC-015,Unit Tracking,First unit tracking,Verify system tracks first unit within a location,AC5: System tracks different units/docks/suites within same building,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""500 Broadway"",""city"":""San Francisco"",""state"":""CA"",""postal_code"":""94111"",""country_code"":""US"",""name"":""Warehouse"",""location_code"":""UNIT-A""}}}]}",200,"normalized_location.units[0].unit_identifier, normalized_location.units[0].names_used, normalized_location.units[0].first_seen","Unit 'UNIT-A' tracked with names_used=['Warehouse'], first_seen timestamp set",NormalizedLocation exists for 500 Broadway,500 Broadway,San Francisco,CA,94111,US,Warehouse,UNIT-A,,,,,,,"Verify unit_identifier, names_used[], first_seen are tracked"
TC-AC-016,Unit Tracking,Update last_seen,Verify last_seen is updated when same unit is used again,AC5: When same unit is used again, update last_seen,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""500 Broadway"",""city"":""San Francisco"",""state"":""CA"",""postal_code"":""94111"",""country_code"":""US"",""name"":""Warehouse"",""location_code"":""UNIT-A""}}}]}",200,"normalized_location.units[0].last_seen","last_seen timestamp updated to current time",NormalizedLocation exists with unit UNIT-A,500 Broadway,San Francisco,CA,94111,US,Warehouse,UNIT-A,,,,,,,"Verify last_seen is updated, first_seen unchanged"
TC-AC-017,Unit Tracking,Add new unit,Verify new unit is added to units array when different unit at same building,AC5: When new unit at same building, add new unit object to units array,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""500 Broadway"",""city"":""San Francisco"",""state"":""CA"",""postal_code"":""94111"",""country_code"":""US"",""name"":""Warehouse Dock B"",""location_code"":""UNIT-B""}}}]}",200,"normalized_location.units.length, normalized_location.units[1].unit_identifier","New unit 'UNIT-B' added to units array, existing UNIT-A remains",NormalizedLocation exists with unit UNIT-A,500 Broadway,San Francisco,CA,94111,US,Warehouse Dock B,UNIT-B,,,,,,,"Verify units array contains both UNIT-A and UNIT-B"
TC-AC-018,Unit Tracking,Multiple names for unit,Verify names_used array tracks all names used for a unit,AC5: Track names_used[] for each unit,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""500 Broadway"",""city"":""San Francisco"",""state"":""CA"",""postal_code"":""94111"",""country_code"":""US"",""name"":""Main Warehouse"",""location_code"":""UNIT-A""}}}]}",200,"normalized_location.units[0].names_used","names_used array includes both 'Warehouse' and 'Main Warehouse'",NormalizedLocation exists with unit UNIT-A that has names_used=['Warehouse'],500 Broadway,San Francisco,CA,94111,US,Main Warehouse,UNIT-A,,,,,,,"Verify new name is added to names_used array"
TC-AC-019,Graceful Failure,Google Places API failure,Verify system handles Google Places API failure gracefully,AC6: When Google Places API fails, set google_place_id, latitude, longitude to null,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""123 Test St"",""city"":""Test City"",""state"":""CA"",""postal_code"":""12345"",""country_code"":""US""}}}]}",200,"normalized_location.google_place_id, normalized_location.latitude, normalized_location.longitude","google_place_id, latitude, longitude set to null when API fails",Google Places API returns error or timeout,123 Test St,Test City,CA,12345,US,Test Location,TEST-001,,,,,,,"Verify load creation continues successfully"
TC-AC-020,Graceful Failure,Use user address components,Verify user's address components used as normalized values when API fails,AC6: Use user's address components as normalized values,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""456 Example Ave"",""city"":""Example City"",""state"":""TX"",""postal_code"":""54321"",""country_code"":""US""}}}]}",200,"normalized_location.street_address, normalized_location.city, normalized_location.state, normalized_location.postal_code","NormalizedLocation uses user's address components when Google Places API fails",Google Places API returns error,456 Example Ave,Example City,TX,54321,US,Example Location,EX-001,,,,,,,"Verify normalized values match user input"
TC-AC-021,Graceful Failure,Warning logged,Verify warning is logged when Google Places API fails,AC6: Log warning but continue load creation,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""789 Failure St"",""city"":""Failure City"",""state"":""FL"",""postal_code"":""99999"",""country_code"":""US""}}}]}",200,"load_id","Warning logged in system logs about Google Places API failure",Google Places API returns error,789 Failure St,Failure City,FL,99999,US,Failure Location,FAIL-001,,,,,,,"Check application logs for warning message"
TC-AC-022,Graceful Failure,Flag for manual review,Verify location is flagged for manual review when API fails,AC6: Flag for manual review/verification,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""321 Review St"",""city"":""Review City"",""state"":""AZ"",""postal_code"":""88888"",""country_code"":""US""}}}]}",200,"normalized_location.needs_review, normalized_location.review_flag","Location flagged with needs_review=true or review_flag set",Google Places API returns error,321 Review St,Review City,AZ,88888,US,Review Location,REV-001,,,,,,,"Verify flag is set for admin review"
TC-AC-023,Link Stops to Locations,Foreign key established,Verify Stop record has foreign key normalized_location_id,AC7: Each Stop record has foreign key normalized_location_id,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""100 Main St"",""city"":""Boston"",""state"":""MA"",""postal_code"":""02101"",""country_code"":""US""}}}]}",200,"stop.normalized_location_id","Stop record contains normalized_location_id foreign key",None,100 Main St,Boston,MA,02101,US,Boston Location,BOS-001,,,,,,,"Verify foreign key is set during load creation"
TC-AC-024,Link Stops to Locations,Link during creation,Verify link is established during load creation,AC7: Link is established during load creation,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""200 Oak Ave"",""city"":""Seattle"",""state"":""WA"",""postal_code"":""98101"",""country_code"":""US""}}}]}",200,"stop.normalized_location_id","normalized_location_id is set immediately after load creation",None,200 Oak Ave,Seattle,WA,98101,US,Seattle Location,SEA-001,,,,,,,"Verify link exists in database immediately"
TC-AC-025,Response Format,GET loads merged data,Verify GET /loads returns merged data for each stop location,AC8: GET /loads returns merged data for each stop location,GET /api/v1/loads/{load_id},GET,None,200,"location_id, location_name, location_code, name, address1, latitude, longitude","Response includes both user's original data and normalized coordinates",Load created with normalized location,100 Main St,Boston,MA,02101,US,Boston Location,BOS-001,,,,,,,"Verify all required fields are present"
TC-AC-026,Response Format,Location ID in response,Verify location_id (NormalizedLocation.id) is included in response,AC8: location_id: The NormalizedLocation.id,GET /api/v1/loads/{load_id},GET,None,200,"location_id","Response includes location_id field with NormalizedLocation.id value",Load created with normalized location,100 Main St,Boston,MA,02101,US,Boston Location,BOS-001,,,,,,,"Verify location_id matches NormalizedLocation.id"
TC-AC-027,Response Format,Canonical location name,Verify location_name (canonical) is included in response,AC8: location_name: The canonical NormalizedLocation.name,GET /api/v1/loads/{load_id},GET,None,200,"location_name","Response includes location_name with canonical NormalizedLocation.name",Load created with normalized location,100 Main St,Boston,MA,02101,US,Boston Location,BOS-001,,,,,,,"Verify location_name is canonical name, not user's name"
TC-AC-028,Response Format,User original fields,Verify user's original location_code and name are included,AC8: location_code: User's original code, name: User's original facility name,GET /api/v1/loads/{load_id},GET,None,200,"location_code, name","Response includes user's original location_code and name",Load created with user's original input,100 Main St,Boston,MA,02101,US,My Custom Name,MY-CODE-001,,,,,,,"Verify user sees their own original values"
TC-AC-029,Response Format,User address fields,Verify user's original address fields are included,AC8: address1-country_code: User's original address fields,GET /api/v1/loads/{load_id},GET,None,200,"address1, address2, city, state, postal_code, country_code","Response includes all user's original address fields",Load created with user's original address,100 Main St,Boston,MA,02101,US,Boston Location,BOS-001,,,,,,,"Verify all address fields match original input"
TC-AC-030,Response Format,Normalized coordinates,Verify latitude/longitude from NormalizedLocation are included,AC8: latitude/longitude: From NormalizedLocation (for mapping),GET /api/v1/loads/{load_id},GET,None,200,"latitude, longitude","Response includes latitude and longitude from NormalizedLocation",Load created with normalized location having coordinates,100 Main St,Boston,MA,02101,US,Boston Location,BOS-001,,,,,,,"Verify coordinates are from NormalizedLocation, not user input"
TC-AC-031,Location Naming,First time name default,Verify first time location name defaults to user_name from first stop,AC9: First time location is created: name defaults to user_name from first stop,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""300 Pine St"",""city"":""Portland"",""state"":""OR"",""postal_code"":""97201"",""country_code"":""US"",""name"":""First Warehouse Name""}}}]}",200,"normalized_location.name","NormalizedLocation.name equals 'First Warehouse Name'",No existing NormalizedLocation,300 Pine St,Portland,OR,97201,US,First Warehouse Name,FWN-001,,,,,,,"Verify canonical name is set from first user_name"
TC-AC-032,Location Naming,Subsequent uses don't change name,Verify canonical name doesn't change on subsequent uses,AC9: Subsequent uses of same location: do not change the canonical name,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""300 Pine St"",""city"":""Portland"",""state"":""OR"",""postal_code"":""97201"",""country_code"":""US"",""name"":""Different Name""}}}]}",200,"normalized_location.name","NormalizedLocation.name remains 'First Warehouse Name', not changed to 'Different Name'",NormalizedLocation exists with name 'First Warehouse Name',300 Pine St,Portland,OR,97201,US,Different Name,FWN-002,,,,,,,"Verify canonical name is immutable after first creation"
TC-AC-033,Location Naming,User sees own name,Verify each user continues to see their own user_name in load responses,AC9: Each user continues to see their own user_name in their load responses,GET /api/v1/loads/{load_id},GET,None,200,"name","Response includes user's original name 'Different Name', not canonical name",Load created with name 'Different Name' for existing location,300 Pine St,Portland,OR,97201,US,Different Name,FWN-002,,,,,,,"User sees their own name, admin sees canonical name"
TC-AC-034,Location Naming,Canonical name for admin,Verify canonical name is used for search, analytics, and admin views,AC9: Canonical name is used for search, analytics, and admin views,GET /api/v1/locations/{location_id},GET,None,200,"name","Admin view shows canonical name 'First Warehouse Name'",NormalizedLocation exists with canonical name,300 Pine St,Portland,OR,97201,US,Different Name,FWN-002,,,,,,,"Admin endpoints use canonical name"
TC-AC-035,Audit Trail,Created at timestamp,Verify NormalizedLocation includes created_at timestamp,AC10: NormalizedLocation records include created_at timestamp,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""400 Elm St"",""city"":""Denver"",""state"":""CO"",""postal_code"":""80201"",""country_code"":""US""}}}]}",200,"normalized_location.created_at","NormalizedLocation.created_at is set to current timestamp",None,400 Elm St,Denver,CO,80201,US,Denver Location,DEN-001,,,,,,,"Verify timestamp is set on creation"
TC-AC-036,Audit Trail,Updated at timestamp,Verify NormalizedLocation includes updated_at timestamp,AC10: NormalizedLocation records include updated_at timestamp,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""400 Elm St"",""city"":""Denver"",""state"":""CO"",""postal_code"":""80201"",""country_code"":""US""}}}]}",200,"normalized_location.updated_at","NormalizedLocation.updated_at is set and updated when location is modified",NormalizedLocation exists for 400 Elm St,400 Elm St,Denver,CO,80201,US,Denver Location,DEN-002,,,,,,,"Verify timestamp updates on modifications"
TC-AC-037,Audit Trail,Unit first_seen timestamp,Verify unit tracking includes first_seen timestamp,AC10: Unit tracking includes first_seen timestamp,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""500 Maple Ave"",""city"":""Austin"",""state"":""TX"",""postal_code"":""73301"",""country_code"":""US"",""location_code"":""UNIT-X""}}}]}",200,"normalized_location.units[0].first_seen","Unit first_seen timestamp is set when unit is first tracked",No existing unit UNIT-X for this location,500 Maple Ave,Austin,TX,73301,US,Austin Location,AUS-001,,,,,,,"Verify first_seen is set on first use"
TC-AC-038,Audit Trail,Unit last_seen timestamp,Verify unit tracking includes last_seen timestamp,AC10: Unit tracking includes last_seen timestamp,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""500 Maple Ave"",""city"":""Austin"",""state"":""TX"",""postal_code"":""73301"",""country_code"":""US"",""location_code"":""UNIT-X""}}}]}",200,"normalized_location.units[0].last_seen","Unit last_seen timestamp is updated when unit is used again",NormalizedLocation exists with unit UNIT-X,500 Maple Ave,Austin,TX,73301,US,Austin Location,AUS-001,,,,,,,"Verify last_seen updates on subsequent uses"
TC-AC-039,Audit Trail,Changes logged,Verify all changes are logged for debugging and analytics,AC10: All changes are logged for debugging and analytics,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""600 Cedar Blvd"",""city"":""Phoenix"",""state"":""AZ"",""postal_code"":""85001"",""country_code"":""US""}}}]}",200,"log_entries","System logs include entries for NormalizedLocation creation/updates",None,600 Cedar Blvd,Phoenix,AZ,85001,US,Phoenix Location,PHX-001,,,,,,,"Check application logs for audit entries"
TC-AC-040,Locations List Sorting,Sort by column ascending,Verify locations list can be sorted by any column ascending,INS-18: Sort by column in ascending order,GET /api/v1/locations?sort=name&order=asc,GET,None,200,"locations array sorted by name ascending","Locations returned sorted by name in ascending order",Multiple locations exist,,,,,,,,,"Verify sort parameter works for any column"
TC-AC-041,Locations List Sorting,Sort by column descending,Verify locations list can be sorted by any column descending,INS-18: Sort by column in descending order,GET /api/v1/locations?sort=created_at&order=desc,GET,None,200,"locations array sorted by created_at descending","Locations returned sorted by created_at in descending order",Multiple locations exist,,,,,,,,,"Verify order parameter works"
TC-AC-042,Locations List Sorting,Default sort by created date desc,Verify default sort is by created date descending when no sort parameter,INS-18: Default sort by created date descending,GET /api/v1/locations,GET,None,200,"locations array sorted by created_at descending","Locations returned sorted by created_at descending (most recently created first)",Multiple locations exist,,,,,,,,,"Verify default behavior when no sort parameter"
TC-AC-043,Location Detail Loads Sorting,Sort loads table ascending,Verify loads table can be sorted by any column ascending,INS-19: Sort loads table by column ascending,GET /api/v1/locations/{location_id}/loads?sort=created_at&order=asc,GET,None,200,"loads array sorted by created_at ascending","Loads returned sorted by created_at in ascending order",Location exists with multiple loads,,,,,,,,,"Verify sort works for loads table"
TC-AC-044,Location Detail Loads Sorting,Sort loads table descending,Verify loads table can be sorted by any column descending,INS-19: Sort loads table by column descending,GET /api/v1/locations/{location_id}/loads?sort=reference_number&order=desc,GET,None,200,"loads array sorted by reference_number descending","Loads returned sorted by reference_number in descending order",Location exists with multiple loads,,,,,,,,,"Verify descending sort works"
TC-AC-045,Location Detail Loads Sorting,Default sort by created date desc,Verify default sort is by created date descending for loads,INS-19: Default sort by created date descending,GET /api/v1/locations/{location_id}/loads,GET,None,200,"loads array sorted by created_at descending","Loads returned sorted by created_at descending (most recent loads first)",Location exists with multiple loads,,,,,,,,,"Verify default behavior for loads table"
TC-AC-046,Integration,Multiple stops same location,Verify load with multiple stops at same location works correctly,Integration: Multiple stops reference same NormalizedLocation,POST /api/v1/loads,POST,"{""stops"":[{""sequence_number"":1,""location"":{""address1"":""700 Oak St"",""city"":""Miami"",""state"":""FL"",""postal_code"":""33101"",""country_code"":""US"",""location_code"":""DOCK-1""}},{""sequence_number"":2,""location"":{""address1"":""700 Oak St"",""city"":""Miami"",""state"":""FL"",""postal_code"":""33101"",""country_code"":""US"",""location_code"":""DOCK-2""}}]}",200,"stops[0].normalized_location_id, stops[1].normalized_location_id","Both stops reference same normalized_location_id, different units tracked",None,700 Oak St,Miami,FL,33101,US,Miami Dock 1,DOCK-1,700 Oak St,Miami,FL,33101,US,Miami Dock 2,DOCK-2,"Verify same location, different units"
TC-AC-047,Integration,Load with origin and destination,Verify load creation with origin and destination stops works,Integration: Load with origin and destination stops,POST /api/v1/loads,POST,"{""stops"":[{""sequence_number"":1,""stop_type"":""PICKUP"",""location"":{""address1"":""800 First St"",""city"":""Atlanta"",""state"":""GA"",""postal_code"":""30301"",""country_code"":""US""}},{""sequence_number"":2,""stop_type"":""DELIVERY"",""location"":{""address1"":""900 Second Ave"",""city"":""Charlotte"",""state"":""NC"",""postal_code"":""28201"",""country_code"":""US""}}]}",200,"stops[0].normalized_location_id, stops[1].normalized_location_id","Both origin and destination stops have normalized_location_id set",None,800 First St,Atlanta,GA,30301,US,Atlanta Origin,ATL-001,900 Second Ave,Charlotte,NC,28201,US,Charlotte Destination,CLT-001,"Verify both stops are normalized"
TC-AC-048,Edge Case,Address with special characters,Verify addresses with special characters are handled correctly,Edge Case: Special characters in address,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""123 Main St #Suite 4-B"",""city"":""New York"",""state"":""NY"",""postal_code"":""10001"",""country_code"":""US""}}]}",200,"normalized_location_id","Address with special characters (#, -, etc.) handled correctly",None,123 Main St #Suite 4-B,New York,NY,10001,US,Special Char Location,SPEC-001,,,,,,,"Verify special characters preserved in user input"
TC-AC-049,Edge Case,International address,Verify international addresses are handled correctly,Edge Case: Non-US addresses,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""123 King Street"",""city"":""Toronto"",""state"":""ON"",""postal_code"":""M5H 1A1"",""country_code"":""CA""}}]}",200,"normalized_location_id, normalized_location.country_code","International address (Canada) handled correctly with country_code CA",None,123 King Street,Toronto,ON,M5H 1A1,CA,Toronto Location,TOR-001,,,,,,,"Verify country_code is preserved and used in deduplication"
TC-AC-050,Edge Case,Missing optional fields,Verify missing optional address fields are handled,Edge Case: Missing optional fields,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""100 Main St"",""city"":""Boston"",""state"":""MA"",""postal_code"":""02101"",""country_code"":""US"",""address2"":null,""name"":null}}]}",200,"normalized_location_id","Load created successfully with missing optional fields (address2, name)",None,100 Main St,Boston,MA,02101,US,,BOS-002,,,,,,,"Verify optional fields don't cause errors"
TC-AC-051,Edge Case,Very long address,Verify very long addresses are handled correctly,Edge Case: Very long address string,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""12345678901234567890123456789012345678901234567890123456789012345678901234567890"",""city"":""Test City"",""state"":""CA"",""postal_code"":""12345"",""country_code"":""US""}}]}",200,"normalized_location_id","Very long address string handled without truncation or errors",None,12345678901234567890123456789012345678901234567890123456789012345678901234567890,Test City,CA,12345,US,Long Address Location,LONG-001,,,,,,,"Verify database field length limits are respected"
TC-AC-052,Edge Case,Empty location code,Verify empty location_code is handled correctly,Edge Case: Empty location_code,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""200 Test St"",""city"":""Test City"",""state"":""CA"",""postal_code"":""12345"",""country_code"":""US"",""location_code"":""""}}]}",200,"normalized_location_id","Empty location_code handled correctly (no unit tracking)",None,200 Test St,Test City,CA,12345,US,Empty Code Location,EMPTY-001,,,,,,,"Verify empty location_code doesn't cause unit tracking errors"
TC-AC-053,Performance,Concurrent load creation,Verify system handles concurrent load creation with same location,Performance: Concurrent requests for same location,POST /api/v1/loads (multiple concurrent),POST,"{""stops"":[{""location"":{""address1"":""300 Concurrent St"",""city"":""Concurrent City"",""state"":""CA"",""postal_code"":""12345"",""country_code"":""US""}}]}",200,"normalized_location_id","All concurrent requests succeed, single NormalizedLocation created, no duplicates",None,300 Concurrent St,Concurrent City,CA,12345,US,Concurrent Location,CONC-001,,,,,,,"Verify race conditions handled correctly"
TC-AC-054,Performance,Many stops in single load,Verify load with many stops (10+) is processed correctly,Performance: Load with many stops,POST /api/v1/loads,POST,"{""stops"":[{""sequence_number"":1-10,""location"":{""address1"":""400 Multi St"",""city"":""Multi City"",""state"":""CA"",""postal_code"":""12345"",""country_code"":""US""}}]}",200,"stops[].normalized_location_id","All 10 stops processed, normalized_location_id set for each",None,400 Multi St,Multi City,CA,12345,US,Multi Stop Location,MULTI-001,,,,,,,"Verify performance with many stops"
TC-AC-055,Error Handling,Invalid address format,Verify invalid address format is handled gracefully,Error Handling: Invalid address format,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""INVALID"",""city"":""""",""state"":""""",""postal_code"":""""",""country_code"":""US""}}]}",200 or 400,"error or normalized_location_id","System handles invalid address gracefully (either validation error or graceful failure)",None,INVALID,,,,US,Invalid Location,INV-002,,,,,,,"Verify appropriate error handling"
TC-AC-056,Error Handling,Database constraint violation,Verify database constraint violations are handled,Error Handling: Database constraints,POST /api/v1/loads,POST,"{""stops"":[{""location"":{""address1"":""500 Constraint St"",""city"":""Constraint City"",""state"":""CA"",""postal_code"":""12345"",""country_code"":""US""}}]}",500 or handled gracefully,"error message","Database constraint violations handled gracefully with appropriate error message",Simulated database constraint violation,500 Constraint St,Constraint City,CA,12345,US,Constraint Location,CONST-001,,,,,,,"Verify error messages are user-friendly"
